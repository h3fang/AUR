# Maintainer: h3fang <hf.enigma@gmail.com>

pkgname="sing-box-bin"
pkgver="1.12.8"
pkgrel="1"
pkgdesc="The universal proxy platform (binary version)."
groups=("modified")
provides=("sing-box")
arch=("x86_64")
url="https://github.com/SagerNet/sing-box"
license=("GPL3")
source=(
    "${url}/releases/download/v${pkgver}/sing-box_${pkgver}_linux_x86_64.pkg.tar.zst"
)
b2sums=('94bad3d7c7a3bfac1282939eb4549330eab8458091ea1200ca50bc6000c1817d0f9084eeab441469d2cbaeaa91f11599d5b568d2f68997d3e85fa58ac64d92fe')

package() {
    install -Dm755 "$srcdir/usr/bin/sing-box" -t "$pkgdir/usr/bin"
    install -Dm644 "$srcdir/usr/lib/systemd/system/sing-box@.service" -t "$pkgdir/usr/lib/systemd/system"
    install -Dm644 "$srcdir/usr/lib/sysusers.d/sing-box.conf" -t "$pkgdir/usr/lib/sysusers.d"
    install -Dm644 "$srcdir/usr/share/polkit-1/rules.d/sing-box.rules" -t "$pkgdir/usr/share/polkit-1/rules.d"
    install -Dm644 "$srcdir/usr/share/zsh/site-functions/_sing-box" -t "$pkgdir/usr/share/zsh/site-functions"
    install -Dm644 "$srcdir/usr/share/licenses/sing-box/LICENSE" -t "$pkgdir/usr/share/licenses/sing-box"
}
