# Maintainer: h3fang <hf.enigma@gmail.com>

pkgname="sing-box-bin"
pkgver="1.12.14"
pkgrel="1"
pkgdesc="The universal proxy platform (binary version)."
groups=("modified")
provides=("sing-box")
arch=("x86_64")
url="https://github.com/SagerNet/sing-box"
license=("GPL3")
source=(
    "${url}/releases/download/v${pkgver}/sing-box_${pkgver}_linux_x86_64.pkg.tar.zst"
)
b2sums=('1b22abe3bc9c587b13a6f47e05a0fce332c657cb45ebdf899a13e2f82135723a9c02d8e08e4335675e1c4ed6de2d9b0ce06dab6ed637c52dce761e34794321d4')

package() {
    install -Dm755 "$srcdir/usr/bin/sing-box" -t "$pkgdir/usr/bin"
    install -Dm644 "$srcdir/usr/lib/systemd/system/sing-box@.service" -t "$pkgdir/usr/lib/systemd/system"
    install -Dm644 "$srcdir/usr/lib/sysusers.d/sing-box.conf" -t "$pkgdir/usr/lib/sysusers.d"
    install -Dm644 "$srcdir/usr/share/polkit-1/rules.d/sing-box.rules" -t "$pkgdir/usr/share/polkit-1/rules.d"
    install -Dm644 "$srcdir/usr/share/zsh/site-functions/_sing-box" -t "$pkgdir/usr/share/zsh/site-functions"
    install -Dm644 "$srcdir/usr/share/licenses/sing-box/LICENSE" -t "$pkgdir/usr/share/licenses/sing-box"
}
