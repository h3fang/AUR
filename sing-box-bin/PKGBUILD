# Maintainer: h3fang <hf.enigma@gmail.com>

pkgname="sing-box-bin"
pkgver="1.12.19"
pkgrel="1"
pkgdesc="The universal proxy platform (binary version)."
groups=("modified")
provides=("sing-box")
arch=("x86_64")
url="https://github.com/SagerNet/sing-box"
license=("GPL3")
source=(
    "${url}/releases/download/v${pkgver}/sing-box_${pkgver}_linux_x86_64.pkg.tar.zst"
)
b2sums=('9cd7f9ec8fdaab87cb63e3fada4ed46d2e13723d457676bbc10902d8289cd0dc77104bde8268c83616e3ed3f1247665bf53942277b91114301f411ed4f24754b')

package() {
    install -Dm755 "$srcdir/usr/bin/sing-box" -t "$pkgdir/usr/bin"
    install -Dm644 "$srcdir/usr/lib/systemd/system/sing-box@.service" -t "$pkgdir/usr/lib/systemd/system"
    install -Dm644 "$srcdir/usr/lib/sysusers.d/sing-box.conf" -t "$pkgdir/usr/lib/sysusers.d"
    install -Dm644 "$srcdir/usr/share/polkit-1/rules.d/sing-box.rules" -t "$pkgdir/usr/share/polkit-1/rules.d"
    install -Dm644 "$srcdir/usr/share/zsh/site-functions/_sing-box" -t "$pkgdir/usr/share/zsh/site-functions"
    install -Dm644 "$srcdir/usr/share/licenses/sing-box/LICENSE" -t "$pkgdir/usr/share/licenses/sing-box"
}
