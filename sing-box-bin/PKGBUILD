# Maintainer: h3fang <hf.enigma@gmail.com>

pkgname="sing-box-bin"
pkgver="1.12.20"
pkgrel="1"
pkgdesc="The universal proxy platform (binary version)."
groups=("modified")
provides=("sing-box")
arch=("x86_64")
url="https://github.com/SagerNet/sing-box"
license=("GPL3")
source=(
    "${url}/releases/download/v${pkgver}/sing-box_${pkgver}_linux_x86_64.pkg.tar.zst"
)
b2sums=('fd13dcbb82e231bcd2b2e2a0ba50538d4cd249031e29a6fa5050d79af78cea03680c52e8de836914a3593fcd565d69c306ca2dbac1d5f78397e009a950df8f2f')

package() {
    install -Dm755 "$srcdir/usr/bin/sing-box" -t "$pkgdir/usr/bin"
    install -Dm644 "$srcdir/usr/lib/systemd/system/sing-box@.service" -t "$pkgdir/usr/lib/systemd/system"
    install -Dm644 "$srcdir/usr/lib/sysusers.d/sing-box.conf" -t "$pkgdir/usr/lib/sysusers.d"
    install -Dm644 "$srcdir/usr/share/polkit-1/rules.d/sing-box.rules" -t "$pkgdir/usr/share/polkit-1/rules.d"
    install -Dm644 "$srcdir/usr/share/zsh/site-functions/_sing-box" -t "$pkgdir/usr/share/zsh/site-functions"
    install -Dm644 "$srcdir/usr/share/licenses/sing-box/LICENSE" -t "$pkgdir/usr/share/licenses/sing-box"
}
