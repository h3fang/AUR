# Maintainer: h3fang <hf.enigma@gmail.com>

pkgname="sing-box-bin"
pkgver="1.12.3"
pkgrel="1"
pkgdesc="The universal proxy platform (binary version)."
groups=("modified")
provides=("sing-box")
arch=("x86_64")
url="https://github.com/SagerNet/sing-box"
license=("GPL3")
source=(
    "${url}/releases/download/v${pkgver}/sing-box_${pkgver}_linux_x86_64.pkg.tar.zst"
)
b2sums=('697770593269dda62a20bcb87348ccd4b4f1d48d49ef20b7a05bf517ac019fb08b83247dc8964520af8fc99012f930f993f9b47745ac3cf516cd749ae97c2120')

package() {
    install -Dm755 "$srcdir/usr/bin/sing-box" -t "$pkgdir/usr/bin"
    install -Dm644 "$srcdir/usr/lib/systemd/system/sing-box@.service" -t "$pkgdir/usr/lib/systemd/system"
    install -Dm644 "$srcdir/usr/lib/sysusers.d/sing-box.conf" -t "$pkgdir/usr/lib/sysusers.d"
    install -Dm644 "$srcdir/usr/share/polkit-1/rules.d/sing-box.rules" -t "$pkgdir/usr/share/polkit-1/rules.d"
    install -Dm644 "$srcdir/usr/share/zsh/site-functions/_sing-box" -t "$pkgdir/usr/share/zsh/site-functions"
    install -Dm644 "$srcdir/usr/share/licenses/sing-box/LICENSE" -t "$pkgdir/usr/share/licenses/sing-box"
}
