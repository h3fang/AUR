# Maintainer: Florian Jacob <projects+arch AT florianjacob )DOT( de>
# Maintainer: Jake <aur@ja-ke.tech>
pkgname=earlyoom
pkgver=1.3
pkgrel=1
pkgdesc="Early OOM Daemon for Linux"
arch=('any')
url="https://github.com/rfjakob/earlyoom"
license=('MIT')
backup=("etc/default/earlyoom")
source=(
	"https://github.com/rfjakob/$pkgname/archive/v$pkgver.tar.gz"
)
sha512sums=('c5de742289e82c2098bd88c61dcb3e20eb022905a015b4894c95a4de3978ce18d794a9e7c17c97851ca9f8888728908f7bf978c014b3b69799bffa8b546d258a')

build() {
	cd "$pkgname-$pkgver"

	# earlyoom tries to get the version number from the git repo, but we're packaging tarballs here, so that would fail.
	make VERSION=$pkgver earlyoom
}

package() {
	cd "$pkgname-$pkgver"
	make install DESTDIR="${pkgdir}" PREFIX="/usr" SYSTEMDDIR="/usr/lib/systemd"
}
