# Maintainer: Reto Brunner <brunnre8@gmail.com>
pkgname=networkd-notify-git
pkgver=r35.5d3425b
pkgrel=1
pkgdesc='Desktop notification integration for systemd-networkd'
arch=('any')
url='https://gitlab.com/wavexx/networkd-notify'
license=('GPL3')
depends=('systemd' 'python' 'python-gobject' 'python-dbus' 'iw')
makedepends=('git')
provides=("${pkgname%-git}")
conflicts=("${pkgname%-git}")
groups=('modified')
source=("$pkgname"::'git+https://gitlab.com/wavexx/networkd-notify.git'
        '001-increase-notification-duration.patch')
sha256sums=('SKIP'
            '401dd63e28f3f5ce0f0ec113e2954eba4d747a0131c40a9e3432bc80c7a8b0f2')

pkgver() {
    cd "$srcdir/${pkgname}"
    printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"

}

prepare() {
    cd "$srcdir/${pkgname}"
    patch -p1 < ../'001-increase-notification-duration.patch'
}

package() {
    cd "$srcdir/${pkgname}"
    mkdir -p "$pkgdir/usr/bin"
    install -m755 "networkd-notify" "$pkgdir/usr/bin/networkd-notify"
}

